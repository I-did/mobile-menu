function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(function(){if("undefined"!=typeof window)try{var a=new window.CustomEvent("test",{cancelable:!0});if(a.preventDefault(),!0!==a.defaultPrevented)throw new Error("Could not prevent default")}catch(a){var b=function(a,b){var c,d;return b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),d=c.preventDefault,c.preventDefault=function(){d.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(a){this.defaultPrevented=!0}},c};b.prototype=window.Event.prototype,window.CustomEvent=b}})(),function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.SimpleMenu=a()}(function(){function a(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}}let b,c,d,e=document.head,f=document.body,g=function(){function g(c){for(let a in _classCallCheck(this,g),b=this,b.defaults={menu:{selector:"",class:"active",animationDuration:.5,animationTimigFunc:"ease"},openBtn:{selector:"",class:"",toggleClass:"",addClass:"animationstart",removeClass:"animationstart"},closeBtn:{selector:"",class:"",toggleClass:"",addClass:"animationstart",removeClass:"animationstart"},overlay:{selector:"",class:"active",bgc:"rgba(0,0,0,.5)",zi:"10",css:"",animationDuration:.5,animationTimigFunc:"ease"},desktop:!1,mediaQuery:"",toTop:!1,toBottom:!1,toLeft:!1,toRight:!1,fade:!1,swipe:!0,swipeThreshold:.3,pageScrolling:!1,scrollingPxs:50,overlayClick:!0,esc:!0},d=b.options=c||{},b.defaults)if(void 0===d[a])d[a]=b.defaults[a];else if("string"!=typeof d[a]&&!1!==d[a])for(let c in b.defaults[a])void 0===d[a][c]&&(d[a][c]=b.defaults[a][c]);else"string"==typeof d[a]&&"string"!=typeof b.defaults[a]&&(b.defaults[a].selector=d[a],d[a]=b.defaults[a]);""!==d.mediaQuery&&(d.desktop=!0),delete b.defaults,b.checkMedia(),window.addEventListener("resize",a(b.checkMedia,100))}return _createClass(g,[{key:"checkMedia",value:function(a){d.desktop?""===d.mediaQuery?!a&&b.buldMenu():window.matchMedia(d.mediaQuery).matches?a&&"resize"===a.type?c?!c.actived&&b.restoreEvents():b.buldMenu():b.buldMenu():a&&"resize"===a.type&&b.menu&&c.actived&&b.destroyEvents():/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?a&&"resize"===a.type?c?!c.actived&&b.restoreEvents():b.buldMenu():b.buldMenu():a&&"resize"===a.type&&b.menu&&c.actived&&b.destroyEvents()}},{key:"buldMenu",value:function(){b.init(),b.initOverlay(),b.initMenu()}},{key:"initOverlay",value:function(){b.overlay=function(){let a,c=d.overlay;return!1!==c&&(""===c.selector?(a=document.createElement("div"),a.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:".concat(c.bgc,";z-index:").concat(c.zi,";").concat(c.css),b.buildAnimation(c,["fi","fo"],["opacity:0","opacity:1"]),c.open=function(){f.appendChild(this.tag),b.setAnimationFor(this,this.animationIn)},c.close=function(){function c(){f.removeChild(d.tag),a.onanimationend=null,a.removeEventListener("animationend",c)}var d=this;b.setAnimationFor(this,this.animationOut),a.addEventListener("animationend",c)}):(a=document.querySelector(c.selector||c),c.open=function(){this.tag.classList.add(c.class)},c.close=function(){this.tag.classList.remove(c.class)}),c.tag=a,a?c:console.error("You'r overlay is not found!"))}()}},{key:"initMenu",value:function(){b.menu=function(){function a(a){a.class&&(a.toggleClass?c.tag.addEventListener(a.toggleClass,function(){return a.tag.classList.toggle(a.class)}):(c.tag.addEventListener("animationstart"===a.addClass?"beforeopen":"open",function(){return a&&a.tag.classList.add(a.class)}),c.tag.addEventListener("animationstart"===a.removeClass?"beforeclose":"close",function(){return a&&a.tag.classList.remove(a.class)})))}let e=b.findElement(d.menu,"Menu");if(c=e,b.tag=c.tag,a(b.openBtn),a(b.closeBtn),b.open=c.open=function(){function a(){c.width||(c.width=c.tag.offsetWidth);var e=new CustomEvent("open");c.tag.dispatchEvent(e),c.opened=!0,window.addEventListener("resize",c.close,{once:!0}),d.pageScrolling||window.addEventListener("scroll",c.close),d.esc&&document.addEventListener("keyup",c.close),b.closeBtn.tag.addEventListener("click",c.close),b.overlay&&d.overlayClick&&b.overlay.tag.addEventListener("click",c.close),c.tag.removeEventListener("animationend",a)}c.pageYscroll=pageYOffset,c.tag.classList.add(c.class),c.open.container(),b.setAnimationFor(c,c.animationIn),b.openBtn.tag.removeEventListener("click",c.open),b.overlay&&b.overlay.open(),-1===navigator.userAgent.search(/edge/i)&&c.tag.scrollHeight>c.tag.offsetHeight&&0<c.tag.scrollTop&&c.tag.scrollTo(0,0);var f=new CustomEvent("beforeopen");c.tag.dispatchEvent(f),c.tag.addEventListener("animationend",a)},b.close=c.close=function(){function a(){c.tag.classList.remove(c.class),c.open.container();var d=new CustomEvent("close");c.tag.dispatchEvent(d),c.opened=!1,c.tag.style.transform="",c.tag.style.willChange="",b.openBtn.tag.addEventListener("click",c.open),c.tag.removeEventListener("animationend",a)}if(!(event&&"keyup"===event.type&&27!==event.keyCode)&&!(event&&"scroll"===event.type&&Math.abs(c.pageYscroll-pageYOffset)<d.scrollingPxs)){b.setAnimationFor(c,c.animationOut),b.closeBtn.tag.removeEventListener("click",c.close),b.overlay&&d.overlayClick&&b.overlay.tag.removeEventListener("click",c.close),c.tag.removeEventListener("touchmove",c.swipeMove),d.pageScrolling||window.removeEventListener("scroll",c.close),b.overlay&&b.overlay.close(),d.esc&&document.removeEventListener("keyup",c.close),window.removeEventListener("resize",c.close);var f=new CustomEvent("beforeclose");c.tag.dispatchEvent(f),c.tag.addEventListener("animationend",a)}},c.getTransform=function(){return+c.tag.style.transform.replace(/[^0-9-.]*/g,"")},!d.fade){let a,b,e,f,g,h,i,j,k;c.swipeStart=function(){c.tag.style.willChange="transform";let d=event.touches[0]||window.event.touches[0];i=e=+d.clientX.toFixed(),k=g=+d.clientY.toFixed(),c.tag.addEventListener("touchmove",c.swipeMove),c.tag.addEventListener("touchend",function(){return a=b=!1},{once:!0})},c.swipeMove=function(){let j=event.touches[0]||window.event.touches[0];h=g-j.clientY.toFixed(),g=j.clientY.toFixed(),f=e-j.clientX.toFixed(),e=j.clientX.toFixed(),a||b||(9<Math.abs(h)?(console.log("scroll"),b=!0):5>Math.abs(h)&&(console.log("swipe"),a=!0)),a&&d.toLeft&&e>i||d.toRight&&e<i?(c.tag.addEventListener("touchend",c.swipeEnd),c.tag.style.transform="translateX(".concat(c.getTransform()-f,"px)")):(b&&d.toBottom&&c.tag.offsetHeight+c.tag.scrollTop>=c.tag.scrollHeight&&g<k||d.toTop&&0===c.tag.scrollTop&&g>k)&&(event.preventDefault(),c.tag.addEventListener("touchend",c.swipeEnd),c.tag.style.transform="translateY(".concat(c.getTransform()-h,"px)"))},c.swipeEnd=function(){c.tag.removeEventListener("touchend",c.swipeEnd),j=c.getTransform();let a=c.width*d.swipeThreshold;if(Math.abs(j)>=a)c.close();else{function a(){c.tag.style.transition="",c.tag.removeEventListener("transitionend",a)}c.tag.style.transform="translate(0)",c.tag.style.transition="transform ".concat(c.animationDuration,"s"),c.tag.addEventListener("transitionend",a)}},d.swipe&&c.tag.addEventListener("touchstart",c.swipeStart)}if(!d.fade){let a=c.container=document.createElement("div");if(a.style.cssText="position:absolute;overflow:hidden;",a.style.top=getComputedStyle(c.tag).top,a.style.bottom=getComputedStyle(c.tag).bottom,a.style.zIndex=getComputedStyle(c.tag).zIndex,c.contained=!1,c.tag.style.top=0,c.tag.style.bottom="auto",c.parent=c.tag.parentElement,c.open.container=function(){c.contained?(c.parent.appendChild(c.tag),c.parent.removeChild(a),c.contained=!1):(a.style.height="".concat(c.tag.offsetHeight,"px"),a.style.width="".concat(c.tag.offsetWidth,"px"),a.style.left=getComputedStyle(c.tag).left,a.style.right=getComputedStyle(c.tag).right,c.parent.appendChild(a),a.appendChild(c.tag),c.contained=!0)},!d.toTop&&!d.toBottom&&!d.toLeft&&!d.toRight){let a=window.screen.width,c={left:+b.openBtn.tag.getBoundingClientRect().left.toFixed(),right:+(a-b.openBtn.tag.getBoundingClientRect().right).toFixed()};c.left>c.right?d.toLeft=!0:d.toRight=!0}d.toLeft?(b.buildAnimation(c,["fr","tr"],["translateX(100%)","translateX(0%)"]),c.tag.style.right=0,c.tag.style.left="auto"):d.toRight?(b.buildAnimation(c,["fl","tl"],["translateX(-100%)","translateX(0%)"]),c.tag.style.left=0,c.tag.style.right="auto"):d.toBottom?(c.tag.style.top=0,c.tag.style.bottom="auto",b.buildAnimation(c,["ft","tt"],["translateY(-100%)","translateY(0%)"])):d.toTop&&(b.buildAnimation(c,["fb","tb"],["translateY(100%)","translateY(0%)"]),c.tag.style.bottom=0,c.tag.style.top="auto")}else{if(!d.menu.animationIn&&!d.menu.animationOut)b.buildAnimation(c,["fi","fo"],["opacity:0","opacity:1"]);else if(!d.menu.animationIn||!d.menu.animationOut)return void console.error("Add another animaion!");c.open.container=function(){return!1}}return b.restoreEvents(),e}()}},{key:"destroyEvents",value:function(){b.openBtn.tag.removeEventListener("click",c.open),b.closeBtn.tag.removeEventListener("click",c.close),c.actived=!1}},{key:"restoreEvents",value:function(){b.openBtn.tag.addEventListener("click",c.open),b.closeBtn.tag.addEventListener("click",c.close),c.actived=!0}},{key:"init",value:function(){b.openBtn=function(){let a=b.findElement(d.openBtn,"Open button(s)");return a}(),b.closeBtn=b.findElement(d.closeBtn,"Close button(s)")}},{key:"findElement",value:function(a,b){let c;return""===a.selector?console.error("".concat(b," selector is empty!")):c=document.querySelector(a.selector),a.tag=c,c?a:console.error("".concat(b," is not found!"))}},{key:"buildAnimation",value:function(a,b,c){let d=["animationIn","animationOut"];for(let e=0;e<b.length;e++)c[e]=c[e].replace(/(translate(.*))/,"transform:$1"),a[d[e]]={name:b[e],key:"@keyframes ".concat(b[e],"{from{").concat(c[e],"}to{").concat(c[1==e?0:1],"}}")}}},{key:"setAnimationFor",value:function(a,b){function d(){a.tag.style.animation="",b.key&&e.removeChild(f),a.tag.removeEventListener("animationend",d)}let f;b.key&&(f=document.createElement("style"),f.textContent=b===c.animationOut?b.key.replace(/\(.*?\)/,"(".concat(c.getTransform(),")")):b.key,e.appendChild(f)),a.tag.style.animation="".concat(b.name," ").concat(a.animationDuration,"s ").concat(a.animationTimigFunc),a.tag.addEventListener("animationend",d)}}]),g}();return g});